import{d as Z,s as b,c as ee,a,T as oe,w as ne,v as te,_ as le,u as se,r as P,o as ae,b as ie,e as j,f as I,g as re,h as G,i as ce,j as de,k as ue,l as pe}from"./index-C2blXwEK.js";import{F as ge,_ as me}from"./index-CbRG_8c-.js";import{g as fe,m as ve,_ as T,r as _e,t as he,P as y,u as $e,E as ye,C as Ce,I as xe,a as we,b as Se,c as be,d as Ie,e as Be,f as Te,h as He,i as ze,j as Ee,k as Ae,w as Le,l as q,B as ke}from"./Col-BQnMq_kH.js";import{_ as Fe}from"./index-1PGfYYHc.js";const B=(e,o,n,r,t)=>({backgroundColor:e,border:`${r.lineWidth}px ${r.lineType} ${o}`,[`${t}-icon`]:{color:n}}),Me=e=>{const{componentCls:o,motionDurationSlow:n,marginXS:r,marginSM:t,fontSize:d,fontSizeLG:i,lineHeight:u,borderRadiusLG:p,motionEaseInOutCirc:l,alertIconSizeLG:g,colorText:m,paddingContentVerticalSM:f,alertPaddingHorizontal:_,paddingMD:h,paddingContentHorizontalLG:$}=e;return{[o]:T(T({},_e(e)),{position:"relative",display:"flex",alignItems:"center",padding:`${f}px ${_}px`,wordWrap:"break-word",borderRadius:p,[`&${o}-rtl`]:{direction:"rtl"},[`${o}-content`]:{flex:1,minWidth:0},[`${o}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:d,lineHeight:u},"&-message":{color:m},[`&${o}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${l}, opacity ${n} ${l},
        padding-top ${n} ${l}, padding-bottom ${n} ${l},
        margin-bottom ${n} ${l}`},[`&${o}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${o}-with-description`]:{alignItems:"flex-start",paddingInline:$,paddingBlock:h,[`${o}-icon`]:{marginInlineEnd:t,fontSize:g,lineHeight:0},[`${o}-message`]:{display:"block",marginBottom:r,color:m,fontSize:i},[`${o}-description`]:{display:"block"}},[`${o}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Oe=e=>{const{componentCls:o,colorSuccess:n,colorSuccessBorder:r,colorSuccessBg:t,colorWarning:d,colorWarningBorder:i,colorWarningBg:u,colorError:p,colorErrorBorder:l,colorErrorBg:g,colorInfo:m,colorInfoBorder:f,colorInfoBg:_}=e;return{[o]:{"&-success":B(t,r,n,e,o),"&-info":B(_,f,m,e,o),"&-warning":B(u,i,d,e,o),"&-error":T(T({},B(g,l,p,e,o)),{[`${o}-description > pre`]:{margin:0,padding:0}})}}},Ve=e=>{const{componentCls:o,iconCls:n,motionDurationMid:r,marginXS:t,fontSizeIcon:d,colorIcon:i,colorIconHover:u}=e;return{[o]:{"&-action":{marginInlineStart:t},[`${o}-close-icon`]:{marginInlineStart:t,padding:0,overflow:"hidden",fontSize:d,lineHeight:`${d}px`,backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:i,transition:`color ${r}`,"&:hover":{color:u}}},"&-close-text":{color:i,transition:`color ${r}`,"&:hover":{color:u}}}}},Pe=e=>[Me(e),Oe(e),Ve(e)],Ne=fe("Alert",e=>{const{fontSizeHeading3:o}=e,n=ve(e,{alertIconSizeLG:o,alertPaddingHorizontal:12});return[Pe(n)]}),Re={success:Be,info:Ie,error:be,warning:Se},De={success:we,info:xe,error:Ce,warning:ye},We=he("success","info","warning","error"),je=()=>({type:y.oneOf(We),closable:{type:Boolean,default:void 0},closeText:y.any,message:y.any,description:y.any,afterClose:Function,showIcon:{type:Boolean,default:void 0},prefixCls:String,banner:{type:Boolean,default:void 0},icon:y.any,closeIcon:y.any,onClose:Function}),Ge=Z({compatConfig:{MODE:3},name:"AAlert",inheritAttrs:!1,props:je(),setup(e,o){let{slots:n,emit:r,attrs:t,expose:d}=o;const{prefixCls:i,direction:u}=$e("alert",e),[p,l]=Ne(i),g=b(!1),m=b(!1),f=b(),_=c=>{c.preventDefault();const v=f.value;v.style.height=`${v.offsetHeight}px`,v.style.height=`${v.offsetHeight}px`,g.value=!0,r("close",c)},h=()=>{var c;g.value=!1,m.value=!0,(c=e.afterClose)===null||c===void 0||c.call(e)},$=ee(()=>{const{type:c}=e;return c!==void 0?c:e.banner?"warning":"info"});d({animationEnd:h});const K=b({});return()=>{var c,v,H,z,E,A,L,k,F,M;const{banner:N,closeIcon:R=(c=n.closeIcon)===null||c===void 0?void 0:c.call(n)}=e;let{closable:O,showIcon:C}=e;const V=(v=e.closeText)!==null&&v!==void 0?v:(H=n.closeText)===null||H===void 0?void 0:H.call(n),x=(z=e.description)!==null&&z!==void 0?z:(E=n.description)===null||E===void 0?void 0:E.call(n),D=(A=e.message)!==null&&A!==void 0?A:(L=n.message)===null||L===void 0?void 0:L.call(n),w=(k=e.icon)!==null&&k!==void 0?k:(F=n.icon)===null||F===void 0?void 0:F.call(n),W=(M=n.action)===null||M===void 0?void 0:M.call(n);C=N&&C===void 0?!0:C;const U=(x?De:Re)[$.value]||null;V&&(O=!0);const s=i.value,X=Te(s,{[`${s}-${$.value}`]:!0,[`${s}-closing`]:g.value,[`${s}-with-description`]:!!x,[`${s}-no-icon`]:!C,[`${s}-banner`]:!!N,[`${s}-closable`]:O,[`${s}-rtl`]:u.value==="rtl",[l.value]:!0}),J=O?a("button",{type:"button",onClick:_,class:`${s}-close-icon`,tabindex:0},[V?a("span",{class:`${s}-close-text`},[V]):R===void 0?a(He,null,null):R]):null,Q=w&&(ze(w)?Ee(w,{class:`${s}-icon`}):a("span",{class:`${s}-icon`},[w]))||a(U,{class:`${s}-icon`},null),Y=Ae(`${s}-motion`,{appear:!1,css:!0,onAfterLeave:h,onBeforeLeave:S=>{S.style.maxHeight=`${S.offsetHeight}px`},onLeave:S=>{S.style.maxHeight="0px"}});return p(m.value?null:a(oe,Y,{default:()=>[ne(a("div",q(q({role:"alert"},t),{},{style:[t.style,K.value],class:[t.class,X],"data-show":!g.value,ref:f}),[C?Q:null,a("div",{class:`${s}-content`},[D?a("div",{class:`${s}-message`},[D]):null,x?a("div",{class:`${s}-description`},[x]):null]),W?a("div",{class:`${s}-action`},[W]):null,J]),[[te,!g.value]])]}))}}}),qe=Le(Ge),Ke={class:"login-container"},Ue={key:0,class:"error-message"},Xe={__name:"LoginView",setup(e){const o=ie(),n=re(),r=se(),t=P({password:""}),d=P(!1),i=P("");ae(()=>{r.checkAuth()&&o.push("/")});const u=async()=>{if(!t.value.password){i.value="请输入密码";return}d.value=!0,i.value="";try{const p=await r.login(t.value.password);if(p.success){const l=n.query.redirect||"/";o.push(l)}else i.value=p.message}catch(p){console.error("Unexpected login error:",p),i.value="登录时发生未知错误，请稍后再试"}finally{d.value=!1}};return(p,l)=>{const g=qe,m=Fe,f=me,_=ke,h=ge;return G(),j("div",Ke,[a(h,{model:t.value,onFinish:u,class:"login-form"},{default:I(()=>[l[2]||(l[2]=ce("h2",{class:"login-title"},"管理系统登录",-1)),i.value?(G(),j("div",Ue,[a(g,{message:i.value,type:"error","show-icon":""},null,8,["message"])])):de("",!0),a(f,{name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:I(()=>[a(m,{value:t.value.password,"onUpdate:value":l[0]||(l[0]=$=>t.value.password=$),placeholder:"请输入密码",size:"large",onKeypress:ue(u,["enter"])},null,8,["value"])]),_:1}),a(f,null,{default:I(()=>[a(_,{type:"primary","html-type":"submit",size:"large",block:"",loading:d.value},{default:I(()=>l[1]||(l[1]=[pe(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},eo=le(Xe,[["__scopeId","data-v-4a3f2fa6"]]);export{eo as default};
